{{- if include "medplum.shouldDeployGCPIngress" . }}
apiVersion: networking.gke.io/v1beta1
kind: FrontendConfig
metadata:
  name: {{ include "medplum.fullname" . }}
  namespace: {{ include  "medplum.namespace" . }}
  labels:
    {{- include "medplum.labels" . | nindent 4 }}
spec:
  sslPolicy: {{ .Values.gcp.frontendConfig.sslPolicyName | default "medplum-ssl-policy" | quote }}
  redirectToHttps:
    enabled: {{ .Values.gcp.frontendConfig.redirectToHttps | default true }}
    responseCodeName: MOVED_PERMANENTLY_DEFAULT
{{- end }}

